<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mixer Dashboard</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div class="header"><h2>‚úàÔ∏è Mixer Dashboard</h2></div>

  <div style="margin-top: 160px; padding: 10px;" id="aircraft-list">
    <button onclick="location.href='setup.html'">‚ûï Start New Job</button>
    <div id="job-buttons"></div>
  </div>

  <script>
    function loadAircraftList() {
      const saved = JSON.parse(localStorage.getItem("mixerJobs") || "{}");
      const container = document.getElementById("job-buttons");
      container.innerHTML = "";
      Object.keys(saved).forEach(reg => {
        const row = document.createElement("div");
        row.style.margin = "10px 0";

        const btn = document.createElement("button");
        btn.textContent = `‚úàÔ∏è ${reg}`;
        btn.onclick = () => {
          window.location.href = `job.html?reg=${encodeURIComponent(reg)}`;
        };

        const del = document.createElement("button");
        del.textContent = "üóë Delete";
        del.style.marginLeft = "10px";
        del.onclick = () => {
          if (confirm(`Delete job for ${reg}?`)) {
            delete saved[reg];
            localStorage.setItem("mixerJobs", JSON.stringify(saved));
            loadAircraftList();  // refresh UI
          }
        };

        row.appendChild(btn);
        row.appendChild(del);
        container.appendChild(row);
      });

      if (Object.keys(saved).length === 0) {
        container.innerHTML = "<p>No saved aircraft jobs.</p>";
      }
    }

    loadAircraftList();
  </script>
</body>
</html>
